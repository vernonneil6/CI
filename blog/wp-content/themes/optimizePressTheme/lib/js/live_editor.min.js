var op_cur_html,cur=[];!function(a){function b(){localStorage.getItem("op_row")?a(".paste-row").show():a(".paste-row").hide()}function c(){var b,c=a(".op-content-slider-button");c.each(function(){b=a(this);var c=a("#"+a(this).data("target"));a(this).unbind("click").click(function(a){var b=window.pageYOffset;c.show().animate({top:b},400),a.preventDefault()}),c.find(".hide-the-panda").unbind("click").click(function(b){var d=window.pageYOffset;c.animate({top:-d},400,function(){a(this).hide()}),b.preventDefault()}),c.on("click","ul.op-image-slider-content li a",function(d){var e=b.next("input.op-gallery-value"),f=(e.next(".file-preview").find(".content"),a(this).find("img").attr("src")),g='<a class="preview-image" target="_blank" href="'+f+'"><img alt="uploaded-image" src="'+f+'"></a><a class="remove-file button" href="#remove">Remove Image</a>';e.val(f),e.parent().next(".op-file-uploader").find(".file-preview .content").empty().html(g).find(".remove-file").click(function(){a(this).parent().empty().parent(".file-preview").prev(".op-uploader-value").val("")}),a("#op_page_thumbnail").val(f),c.animate({top:-475},400,function(){a(this).hide()}),d.preventDefault()})})}function d(){var b=a("#le-layouts-dialog .op-insert-button");A.on("click","#le-layouts-dialog ul.op-bsw-grey-panel-tabs a",function(c){c.preventDefault(),"predefined"==a(this).get_hash()?b.show():b.hide()}),A.on("click","#export_layout_category_create_new",function(b){b.preventDefault(),a("#export_layout_category_select_container:visible").fadeOut("fast",function(){a("#export_layout_category_new_container").fadeIn("fast")})}),A.on("click","#export_layout_category_select",function(b){b.preventDefault(),a("#export_layout_category_new_container:visible").fadeOut("fast",function(){a("#export_layout_category_select_container").fadeIn("fast")})}),A.on("click","#export_layout_category_new_submit",function(b){b.preventDefault();var c=a(this).next().find("img").fadeIn("fast"),d=a(this).prev().val(),e={action:OptimizePress.SN+"-live-editor-create-category",_wpnonce:a("#op_le_wpnonce").val(),category_name:d};a.post(OptimizePress.ajaxurl,e,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error?alert(b.error):(a("#export_layout_category").html(b.html),a("#export_layout_category_select").trigger("click"))},"json")}),a("#le-membership-dialog").submit(function(b){b.preventDefault(),a.fancybox.close(),a.fancybox.showLoading();var c={action:OptimizePress.SN+"-live-editor-membership",_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,r(a(this))),o(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),a("#le-headers-dialog").submit(function(b){b.preventDefault();a(this).find(":radio:checked").val();a.fancybox.close();var c={action:OptimizePress.SN+"-live-editor-headers",_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,r(a(this))),o(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),a("#le-colours-dialog").submit(function(b){b.preventDefault();a(this).find(":radio:checked").val();a.fancybox.close();var c={action:OptimizePress.SN+"-live-editor-colours",_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val()};a.extend(c,r(a(this))),o(),a.post(OptimizePress.ajaxurl,c,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),a("#le-layouts-dialog").submit(function(b){b.preventDefault();var c=a(this).find(":radio:checked").val();a.fancybox.close(),a.fancybox.showLoading();var d={action:OptimizePress.SN+"-live-editor-get-layout",_wpnonce:a("#op_le_wpnonce").val(),layout:c,page_id:a("#page_id").val(),keep_options:[]};a("#content_layout_keep_options :checkbox:checked").each(function(){d.keep_options.push(a(this).val())}),a.post(OptimizePress.ajaxurl,d,function(b){a.fancybox.hideLoading(),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.done&&(OptimizePress.disable_alert=!0,window.location.reload())},"json")}),A.on("click","#op_export_content a.delete-file",function(b){b.preventDefault();var c=a(this).parent().prev().fadeIn("fast"),d={action:OptimizePress.SN+"-live-editor-deleted-exported-layout",_wpnonce:a("#op_le_wpnonce").val(),filename:a("#zip_filename").val()};a.post(OptimizePress.ajaxurl,d,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error&&alert(b.error),a("#op_export_content").html("")},"json")}),A.on("click","#export_layout_submit",function(b){b.preventDefault(),a("#op_export_content").html("");var c=a(this).next().fadeIn("fast"),d={action:OptimizePress.SN+"-live-editor-export-layout",status:a("#op-live-editor-status").val(),_wpnonce:a("#op_le_wpnonce").val(),layout_name:a("#export_layout_name").val(),layout_description:a("#export_layout_description").val(),layout_category:a("#export_layout_category").val(),image:a("#export_layout_image_path").val(),page_id:a("#page_id").val(),preview_url:a("#export_layout_preview_url").val()||"",op:{},layouts:{}};a("div.editable-area").each(function(){var b=a(this).data("layout");d.layouts[b]=n(a(this))}),"undefined"!=typeof OP_Feature_Area&&(d.feature_area=OP_Feature_Area);for(var e=["typography","settings"],f=0,g=e.length;g>f;f++)a.extend(d.op,r(a("#le-"+e[f]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,d,function(b){c.fadeOut("fast"),"undefined"!=typeof b.error&&alert(b.error),"undefined"!=typeof b.output&&a("#op_export_content").html(b.output)},"json")}),A.on("click",".op-download-file",function(){OptimizePress.disable_alert=!0,setTimeout(function(){OptimizePress.disable_alert=!1},100)}),a("#op_header_layout_nav_bar_alongside_enabled").change(function(){a("#advanced_colors_nav_bar_alongside").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_footer_area_enabled").change(function(){a("#advanced_colors_footer").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_footer_area_enabled").parentsUntil(".section-footer_area",".op-bsw-grey-panel-header").next().hide(),a("#op_header_layout_nav_bar_below_enabled").change(function(){a("#advanced_colors_nav_bar_below").toggle(a(this).is(":checked"))}).trigger("change"),a("#op_header_layout_nav_bar_above_enabled").change(function(){a("#advanced_colors_nav_bar_above").toggle(a(this).is(":checked"))}).trigger("change")}function e(){A.on("click","#op-save-preset",function(b){b.preventDefault(),a.fancybox.open(a.extend({},B,{type:"inline",href:"#le-presets-dialog"}))}),a("#le-presets-dialog").submit(function(b){b.preventDefault();var c={action:OptimizePress.SN+"-live-editor-save-preset",status:a("#op-live-editor-status").val(),_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val(),op:{},preset:r(a("#le-presets-dialog")),layouts:{}};a("div.editable-area").each(function(){var b=a(this).data("layout");c.layouts[b]=n(a(this))}),"undefined"!=typeof OP_Feature_Area&&(c.feature_area=OP_Feature_Area);for(var d=["typography","settings"],e=0,f=d.length;f>e;e++)a.extend(c.op,r(a("#le-"+d[e]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,c,function(b){"undefined"!=typeof b.error?alert(b.error):("undefined"!=typeof b.preset_dropdown&&(a("#preset_save").html(b.preset_dropdown),a("#preset_type").val("overwrite").trigger("change")),alert(OP_AB.translate("saved")),a.fancybox.close())},"json")})}function f(){y&&y[1]&&y[2]&&y[3]&&(y[1].height(y[3].outerHeight()),y[2].height(y[1].height()),y[1].css("margin-top","-"+y[1].innerHeight()/2+"px"))}function g(){A.on("click",".element-container a.add-new-element",function(b){var c,d,e,g=a(this),h=parseInt(g.closest(".cols").width(),10)+40,k=!1;b.preventDefault(),(g.parent().hasClass("op-popup")||g.parent().parent().hasClass("op-popup"))&&(k=!0),g.parent().parent().hasClass("op-popup")&&(h=parseInt(g.parent().parent().data("width"),10)||700,h+=40,h=h>=a(window).width()?a(window).width()-40:h),f(),y[3].html(""),y[2].css("background","url(images/wpspin_light.gif) no-repeat center center"),y[0].add(y[1]).fadeIn(),y[1].width(h).css("margin-left",-(h/2)+"px"),400>h&&y[1].addClass("epicbox-narrow"),z=g.closest(".element").find("textarea.op-le-child-shortcode"),op_cur_html=y[3],e=z.val(),k&&e&&(c=/(\[custom_html\])([\s\S]*?)(\[\/custom_html\])/gi,d=/(<)(textarea)([\s\S]*?)(>)([\s\S]*?)(<)(\/textarea)(>)/gi,e=e.replace(c,function(a,b,c,e){var f=c.replace(d,function(a,b,c,d,e,f,g,h){return"&lt;"+c+d+"&gt;"+f+"&lt;"+h+"&gt;"});return""+b+f+e})),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#op_le_wpnonce").val(),shortcode:e,depth:1,page_id:a("#page_id").val()},function(b){"undefined"!=typeof b.output&&("undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),y[2].css("background","none").addClass("op_no_outline").attr("tabindex",0).focus(),y[3].html(b.output+b.js),y[4]=a(".epicbox-actual-content",y[3]),f(),i(),j()),a(document).trigger("op.afterLiveEditorParse")},"json")}),y[3].on("click",".op-element-links a.element-delete",function(b){b.preventDefault(),confirm("Are you sure you wish to remove this element?")&&a(this).closest(".row").remove()&&f()}),y[3].on("click","a.add-new-element",function(b){b.preventDefault(),a("#op_asset_browser_container").addClass("hide-elements-with-child-elements"),E=!0;a(this).prev();cur=[a(this),"before"],F=null,OP_AB.open_dialog(),a("#op_assets_filter").val("").trigger("keyup")}),y[3].on("click",".op-element-links a.element-settings",function(b){b.preventDefault();var c=a(this).closest(".row");cur=[c,"replaceWith"],E=!0,q(c,!1)}),y[1].on("click",".close",function(b){b.preventDefault(),E=!1,a("#op_asset_browser_container").removeClass("hide-elements-with-child-elements"),y[0].add(y[1]).fadeOut()}),a("#op_child_elements_form").submit(function(b){b.preventDefault();var c="",d="",e=!1,f="",g="",h="";a(this).find(".op_popup_element_present").length>0&&(e=!0),g="[op_liveeditor_elements] ",e&&(g="[op_popup_elements]",f="[op_popup_elements]"),a(this).find("textarea.op-le-child-shortcode").each(function(){var b=0===a(this).val().indexOf("[op_popup_button]")?!0:!1;b?d+=a(this).val():e?a(this).val().indexOf("[op_popup_elements]")<0?(c+='[op_popup_content_element data-style="'+(a(this).parent().parent().attr("data-style")||"")+'"]',c+=a(this).val(),c+="[/op_popup_content_element]"):h=a(this):(g+='[op_liveeditor_element data-style="'+(a(this).parent().parent().attr("data-style")||"")+'"]',g+=a(this).val(),g+="[/op_liveeditor_element] ")}),e||(g+="[/op_liveeditor_elements] "),e?(f+=c,f+="[/op_popup_elements]",h.val(f),g+="[op_popup_button]",d=d.split(/\[op_popup_button\](.*)\[\/op_popup_button\]/gi),d=d[1],g+=d,g+="[/op_popup_button]",g+="[op_popup_content]",g+=c,g+="[/op_popup_content]",g+="[/op_popup_elements]",z.closest(".element-container").find(".op-le-child-shortcode").val(f),entireShortcode=z.closest(".element-container").find(".op-le-shortcode").val(),entireShortcode=entireShortcode.replace(/\[op_popup_content[ d|\]][\s\S]*\[\/op_popup_content\]/gi,"[op_popup_content]"+c+"[/op_popup_content]"),z.closest(".element-container").find(".op-le-shortcode").val(entireShortcode).text(entireShortcode)):(z.val(g),l(z)),E=!1,a(".close",y[1]).trigger("click")})}function h(){H&&"string"!=typeof this.content&&this.content.find(".wp-editor-area").each(function(){var b=a(this).attr("id");"opassetswysiwyg"!=b&&(a("#"+b+"-tmce").trigger("click"),tinyMCE.execCommand("mceFocus",!1,b),tinyMCE.majorVersion>3?tinyMCE.execCommand("mceRemoveEditor",!1,b):tinyMCE.execCommand("mceRemoveControl",!1,b))})}function i(b){var b=b||!1;b?y[4].sortable("refresh").disableSelection():y[4].sortable(a.extend({},G,{handle:".op-element-links .element-move",items:"div.row",update:null})).disableSelection()}function j(){OptimizePress.initCountdownElements()}function k(b){var c=b.find("textarea.op-le-shortcode"),d=c.text();d||(d=c.val()),d||(d="");var e=new RegExp("#OP_CHILD_ELEMENTS#");return b.find("textarea.op-le-child-shortcode").each(function(){d=d.replace(e,a(this).val())}),d}function l(b){b.text("");var c,d=b.closest(".element-container"),e=k(d),f=d.find(".element:first"),g=d.find(".op-waiting");op_cur_html=d,f.fadeOut("fast").html(""),g.fadeIn("fast").end().find(".op-show-waiting").fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#op_le_wpnonce").val(),shortcode:e,depth:0,page_id:a("#page_id").val()},function(e){if("undefined"!=typeof f&&"undefined"!=typeof e.output){"undefined"!=typeof e.font&&""!==e.font&&"google"===e.font[0]&&WebFont.load({google:{families:[e.font[1]+e.font[2].properties]}}),c=op_cur_html.attr("data-style")?JSON.parse(atob(op_cur_html.attr("data-style"))):{},c.codeBefore=c.codeBefore||"",c.codeAfter=c.codeAfter||"",f.html(c.codeBefore+e.output+e.js+c.codeAfter);var h=d.closest(".editable-area");u(h),"undefined"!=typeof e.shortcode&&b.val(e.shortcode),g.fadeOut("fast",function(){f.fadeIn("fast")}),m(h),j()}a(document).trigger("op.afterLiveEditorParse")},"json")}function m(b){b.each(function(){var b=a(this),c=b.attr("id"),d="le_"+("footer_area"==c?"footer":"content_area"==c?"body":c)+"_row_",e=1;a(this).find("> .row").each(function(){var b=1;a(this).attr("id",d+e).find("> .cols").each(function(){var c=1;a(this).attr("id",d+e+"_col_"+b).find("> .element-container:not(.sort-disabled)").each(function(){a(this).attr("id",d+e+"_col_"+b+"_el_"+c),c++}),b++}),e++})})}function n(b){var c=[];return b.length>0&&(c=[]),b.find("> .row").each(function(){var b=a(this),d={row_class:b.attr("class"),row_style:b.attr("style"),row_data_style:b.attr("data-style"),children:[]};b.find("> > .cols:not(.sort-diabled)").each(function(){var b=a(this),c={col_class:b.attr("class"),type:"column",children:[]},e={type:"",object:{}};b.find("> div:not(.sort-disabled, .add-element-container)").each(function(){var b={type:"",object:{}};if(a(this).hasClass("element-container"))b.type="element",b.object=k(a(this)),b.element_class=a(this).attr("class"),a(this).hasClass("cf")||a(this).addClass("cf"),b.element_data_style=a(this).attr("data-style"),c.children.push(b);else if(a(this).hasClass("subcol")){var d=a(this),e={subcol_class:a(this).attr("class"),type:"subcolumn",children:[]};d.find("> div:not(.sort-disabled, .add-element-container)").each(function(){var b=a(this),c={type:"",object:{}};c.type="element",c.object=k(b),c.element_class=a(this).attr("class"),c.element_data_style=a(this).attr("data-style"),e.children.push(c)}),c.children.push(e)}}),e.type="column",e.object=c,d.children.push(e)}),c.push(d)}),c}function o(b){var c={action:OptimizePress.SN+"-live-editor-save",status:a("#op-live-editor-status").val(),_wpnonce:a("#op_le_wpnonce").val(),page_id:a("#page_id").val(),op:{},layouts:{}};op_show_loading(),a("div.editable-area").each(function(){var b=a(this).data("layout");c.layouts[b]=n(a(this))}),"undefined"!=typeof OP_Feature_Area&&(c.feature_area=OP_Feature_Area);for(var d=["typography","settings"],e=0,f=d.length;f>e;e++)a.extend(c.op,r(a("#le-"+d[e]+"-dialog")).op||{});a.post(OptimizePress.ajaxurl,c,function(c){op_hide_loading(),"undefined"!=typeof c.error?(alert(c.error),window.op_dont_hide_loading=!1,op_hide_loading()):a.isFunction(b)?(OptimizePress.disable_alert||alert(OP_AB.translate("saved")),b()):(OptimizePress.disable_alert||alert(OP_AB.translate("saved")),OptimizePress.disable_alert=!1,window.op_dont_hide_loading=!1,op_hide_loading())},"json")}function p(c,d){if(d=d||"",d=""==d?"":d+"-","N"==c.data("one_col")){c.append('<div id="'+d+'add-new-row" class="cf"><div class="'+d+'add-new-row-link"><div class="add-new-row-content"><a href="#op-le-row-select" class="add-new-button"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="'+w("add_new_row")+'" /><span>'+w("add_new_row")+"</span></a></div></div></div>");var e=a("a","#"+d+"add-new-row");e.fancybox(a.extend({},B,{type:"inline",href:"#op-le-row-select",beforeLoad:function(){cur=[a("#"+d+"add-new-row"),"before"]}})),c.on("click",".add-new-row",function(b){b.preventDefault(),cur=[a(this).closest(".row"),"before"],a.fancybox.open(a.extend({},B,{type:"inline",href:"#op-le-row-select"}))}),A.on("mouseenter",".cols",function(){a(this).find(".split-column").fadeIn(100)}),A.on("mouseleave",".cols",function(){a(this).find(".split-column").fadeOut(100)}),A.on("click",".split-column",function(b){b.preventDefault();var c=a(this).attr("href");switch(c=c.substring(1),a("#op-le-split-column ul li").each(function(){a(this).hide()}),c){case"one-half":a("#op-le-split-column ul li a.split-half").parent().show();break;case"two-thirds":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show();break;case"two-fourths":a("#op-le-split-column ul li a.split-half").parent().show();break;case"three-fourths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show(),a("#op-le-split-column ul li a.one-fourths").parent().show();break;case"three-fifths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show();break;case"four-fifths":a("#op-le-split-column ul li a.split-half").parent().show(),a("#op-le-split-column ul li a.one-third-first").parent().show(),a("#op-le-split-column ul li a.one-third-second").parent().show(),a("#op-le-split-column ul li a.one-thirds").parent().show(),a("#op-le-split-column ul li a.one-fourth-first").parent().show(),a("#op-le-split-column ul li a.one-fourth-second").parent().show(),a("#op-le-split-column ul li a.one-fourths").parent().show()}cur=[a(this).closest(".column"),"append"],a.fancybox.open(a.extend({},B,{type:"inline",href:"#op-le-split-column"}))}),A.on("click",".banner",function(b){b.preventDefault(),b.stopPropagation(),a.fancybox.open(a.extend({},B,{type:"inline",href:"#le-headers-dialog"}))}),A.on("click",".edit-row",function(b){if(b.preventDefault(),cur=[a(this).closest(".row"),"before"],cur[0].hasClass("section")?a('input[name="op_full_width_row"]').prop("checked",!0):a('input[name="op_full_width_row"]').prop("checked",!1),cur_style=cur[0].attr("style"),cur_data_style=cur[0].attr("data-style"),a("#op_section_row_options_bgcolor_start").val("").trigger("change"),a("#op_section_row_options_bgcolor_end").val("").trigger("change"),a("#op_row_top_padding").val(""),a("#op_row_before").val(""),a("#op_row_after").val(""),a("#op_row_css_class").val(""),a("#op_row_bottom_padding").val(""),a("#op_row_border_width").val(""),a("#op_row_border_top_width").val(""),a("#op_row_border_bottom_width").val(""),a("#op_section_row_options_borderColor").val("").trigger("change"),a("#op_section_row_options_borderTopColor").val("").trigger("change"),a("#op_section_row_options_borderBottomColor").val("").trigger("change"),cur_data_style){a.each(a('[id^="op_row_addon_"]'),function(b,c){a(c).is(":checkbox")?a(c).prop("checked",!1):a(c).hasClass("op-uploader-value")?OP_AB.set_uploader_value(a(c).prop("id"),""):"number"==a(c).prop("type")?a(c).val(a(c).val()):a(c).hasClass("slider-item")?(a(c).find("input").val(0),a(c).slider("value",0),a(c).prev().find("span").text("0"+a(c).prev().find("span").data("unit")).attr("id","output_"+a(c).attr("id"))):a(c).val("")}),OP_AB.set_uploader_value("op_row_background",""),a(".op_row_bg_options option").each(function(){a(this).attr("selected",!1)});var c=JSON.parse(atob(cur_data_style));for(var d in c)switch(d){case"cssClass":a("#op_row_css_class").val(c[d]);break;case"codeBefore":a("#op_row_before").val(c[d]);break;case"codeAfter":a("#op_row_after").val(c[d]);break;case"paddingTop":a("#op_row_top_padding").val(c[d]);break;case"paddingBottom":a("#op_row_bottom_padding").val(c[d]);break;case"backgroundImage":var e=c[d].slice(4,-1);OP_AB.set_uploader_value("op_row_background",e);break;case"backgroundPosition":a('.op_row_bg_options option[value="'+c[d]+'"]').attr("selected","selected");break;case"borderWidth":a("#op_row_border_top_width").val(c[d]),a("#op_row_border_bottom_width").val(c[d]);break;case"borderColor":a("#op_section_row_options_borderTopColor").val(c[d]).trigger("change"),a("#op_section_row_options_borderBottomColor").val(c[d]).trigger("change");break;case"borderTopWidth":a("#op_row_border_top_width").val(c[d]);break;case"borderTopColor":a("#op_section_row_options_borderTopColor").val(c[d]).trigger("change");break;case"borderBottomWidth":a("#op_row_border_bottom_width").val(c[d]);break;case"borderBottomColor":a("#op_section_row_options_borderBottomColor").val(c[d]).trigger("change");break;case"backgroundColorStart":a("#op_section_row_options_bgcolor_start").val(c[d]).trigger("change");break;case"backgroundColorEnd":a("#op_section_row_options_bgcolor_end").val(c[d]).trigger("change");break;case"addon":a.each(c[d],function(b,c){var d=a("#op_row_addon_"+b);d.is(":checkbox")?d.prop("checked",c):d.hasClass("op-uploader-value")?OP_AB.set_uploader_value(d.prop("id"),c):d.hasClass("slider-item")?(d.slider("value",c),d.find("input").val(c),d.prev().find("span").text(c+d.prev().find("span").data("unit"))):d.val(c).trigger("change")})}}else a.each(a('[id^="op_row_addon_"]'),function(b,c){a(c).is(":checkbox")?a(c).prop("checked",!1):a(c).hasClass("op-uploader-value")?OP_AB.set_uploader_value(a(c).prop("id"),""):"number"==a(c).prop("type")?a(c).val(a(c).val()):a(c).hasClass("slider-item")?(a(c).find("input").val(0),a(c).slider("value",0),a(c).prev().find("span").text("0"+a(c).prev().find("span").data("unit")).attr("id","output_"+a(c).attr("id"))):a(c).val("")}),OP_AB.set_uploader_value("op_row_background",""),a(".op_row_bg_options option").each(function(){a(this).attr("selected",!1)});a.fancybox.open(a.extend({},B,{type:"inline",href:"#op-le-row-options"}))}),a(window).on("focus",function(){b()}),A.on("click",".paste-row",function(b){b.preventDefault();var d=localStorage.getItem("op_row")||"";a(this).closest(".row").before(d),m(c),u(c),a(".paste-row").show()}),A.on("click",".copy-row",function(b){b.preventDefault();var c=a(this).closest(".row"),d=c.clone().attr("id",""),e=0,f=0;c.find("textarea.op-le-shortcode").each(function(){var b=a(d.find("textarea.op-le-shortcode")),c=a(this).val();a(b[e]).val(c),a(b[e]).text(c),e++}),c.find("textarea.op-le-child-shortcode").each(function(){var b=a(d.find("textarea.op-le-child-shortcode")),c=a(this).val();a(b[f]).val(c),a(b[f]).text(c),f++}),d.find(".element-container, .column").each(function(){a(this).attr("id","")});try{localStorage.setItem("op_row",d[0].outerHTML),a(".paste-row").show(),alert("Row succesfully copied")}catch(g){alert("Session Storage not supported or you tried to copy row that is too big")}}),A.on("click",".clone-row",function(){var b=a(this).closest(".row"),d=b.clone().attr("id",""),e=0,f=0;b.find("textarea.op-le-shortcode").each(function(){var b=a(d.find("textarea.op-le-shortcode")),c=a(this).val();a(b[e]).val(c),e++}),b.find("textarea.op-le-child-shortcode").each(function(){var b=a(d.find("textarea.op-le-child-shortcode")),c=a(this).val();a(b[f]).val(c),f++}),d.find(".element-container, .column").each(function(){a(this).attr("id","")}),b.after(d),m(c),u(c)}),c.on("click","a.delete-row",function(b){if(b.preventDefault(),confirm("Are you sure you wish to remove this row and all its elements?")){var c=a(this).closest(".row");c.prev(".op-row-code-before").remove(),c.next(".op-row-code-after").remove(),c.remove()}})}m(c),u(c),c.on("click","a.move-row,a.element-move",function(a){a.preventDefault()}),c.on("click",".cols > .add-element-container > a.add-new-element",function(b){b.preventDefault(),E=!1,cur=[a(this).parent().prev(),"before"],F=null,OP_AB.open_dialog(),a("#op_assets_filter").trigger("keydown")}),c.on("click",".op-element-links a.element-delete",function(b){b.preventDefault(),confirm("Are you sure you wish to remove this element?")&&a(this).closest(".element-container").remove()}),c.on("click",".op-element-links a.element-settings",function(b){b.preventDefault();var c=a(this).closest(".element-container"),d=c.find("> .element a.add-new-element");d.length?d.trigger("click"):(cur=[c,"replaceWith"],F=c.find("textarea.op-le-shortcode"),q(F.closest(".element-container")))}),A.off("click",".op-element-links a.element-advanced"),A.on("click",".op-element-links a.element-advanced",function(b){if(b.preventDefault(),cur=[a(this).closest(".element-container")],cur[0].hasClass("hide-mobile")?a('input[name="op_hide_phones"]').prop("checked",!0):a('input[name="op_hide_phones"]').prop("checked",!1),cur[0].hasClass("hide-tablet")?a('input[name="op_hide_tablets"]').prop("checked",!0):a('input[name="op_hide_tablets"]').prop("checked",!1),cur_data_style=cur[0].attr("data-style"),cur_data_style&&"undefined"!==cur_data_style){a("#op_advanced_fadein").val(""),a("#op_advanced_code_before").val(""),a("#op_advanced_code_after").val(""),a("#op_advanced_class").val("");var c=JSON.parse(atob(cur_data_style));for(var d in c)switch(d){case"codeBefore":a("#op_advanced_code_before").val(c[d]);break;case"codeAfter":a("#op_advanced_code_after").val(c[d]);break;case"fadeIn":a("#op_advanced_fadein").val(c[d]);break;case"advancedClass":a("#op_advanced_class").val(c[d])}}else a("#op_advanced_fadein").val(""),a("#op_advanced_code_before").val(""),a("#op_advanced_code_after").val(""),a("#op_advanced_class").val("");a.fancybox.open(a.extend({},B,{type:"inline",href:a(this).attr("href")}))}),A.off("click","#op-le-advanced-update"),A.on("click","#op-le-advanced-update",function(b){{var c={},d="",e="",f="",g="";cur[0].hasClass("hide-mobile"),cur[0].hasClass("hide-tablet")}b.preventDefault(),cur[0].removeClass().addClass(cur[0].hasClass("row")?"row element-container cf":"element-container cf"),a("#op_advanced_class").val()&&(cur[0].addClass(a("#op_advanced_class").val()),c.advancedClass=a("#op_advanced_class").val()),a('input[name="op_hide_phones"]:checked').length>0?(cur[0].addClass("hide-mobile"),c.hideMobile=1):cur[0].removeClass("hide-mobile"),a('input[name="op_hide_tablets"]:checked').length>0?(cur[0].addClass("hide-tablet"),c.hideTablet=1):cur[0].removeClass("hide-tablet"),a("#op_advanced_fadein").val()&&(c.fadeIn=a("#op_advanced_fadein").val()),a("#op_advanced_code_before").val()&&(d=a("#op_advanced_code_before").val()),a("#op_advanced_code_after").val()&&(e=a("#op_advanced_code_after").val()),""!==d&&""!==e?(g=d+"---OP-BEFORE-AFTER---"+e,g=HTMLtoXML(g),g=g.split(/---OP-BEFORE-AFTER---/),d=g[0],e=g[1]):(d=d?HTMLtoXML(d):d,e=e?HTMLtoXML(e):e),a("#op_advanced_code_before").val(d),a("#op_advanced_code_after").val(e),cur[0].find(".element, .op-hidden, .op-element-links, .op-waiting").each(function(b,c){var g,h,i,j=a(c);j.hasClass("element")?(h=d+a(j[0].innerHTML)[0].outerHTML+e,f+=j.find("> .op-popup").length>0?'<div class="element">'+h:'<div class="element">'+h+"</div>"):j.hasClass("op-hidden")&&!j.hasClass("op-waiting")?(g=j.find(" > textarea").hasClass("op-le-child-shortcode")?"op-le-child-shortcode":"op-le-shortcode",i=j.find("> textarea").val(),f+='<div class="op-hidden">',f+='<textarea name="shortcode[]" class="'+g+'">',f+=i,f+="</textarea>",f+="</div>",j.prev().hasClass("op-popup")&&(f+="</div>")):f+=j[0].outerHTML}),cur[0].html(f),a("#op_advanced_code_before").val()&&(c.codeBefore=a("#op_advanced_code_before").val()),a("#op_advanced_code_after").val()&&(c.codeAfter=a("#op_advanced_code_after").val());var h=btoa(JSON.stringify(c));cur[0].attr("data-style",h),a.fancybox.close()}),c.on("click",".op-element-links a.element-parent-settings",function(b){b.preventDefault();var c=a(this).closest(".element-container");cur=[c,"replaceWith"],F=c.find("textarea.op-le-shortcode"),q(F.closest(".element-container"))}),A.off("click",".op-element-links a.element-clone"),A.on("click",".op-element-links a.element-clone",function(b){b.preventDefault();var c=a(this).closest(".element-container"),d=c.find("textarea.op-le-shortcode").val(),e=c.find("textarea.op-le-child-shortcode").val(),f=c.clone(!0,!0).attr("id","");f.find("textarea.op-le-shortcode").val(d),f.find("textarea.op-le-child-shortcode").val(e),c.after(f)})}function q(b,c){c=c===!1?!1:!0;var d=c?k(b):b.find("textarea.op-le-child-shortcode").val();!c&&b.find(".element > p").length>0&&(d="[text_block]"+d+"[/text_block]"),OP_AB.open_dialog(0),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-params",_wpnonce:a("#op_le_wpnonce").val(),shortcode:d},function(b){"undefined"!=typeof b.error?alert(b.error):a(".fancybox-wrap").length>0&&OP_AB.edit_element(b)},"json")}function r(b){if(!b.length)return!1;var c={},d=c;return b.find(':input[type!="checkbox"][type!="radio"][type!="submit"], input:checked').each(function(){var b=this.name.replace(/\[([^\]]+)?\]/g,",$1").split(","),e=b.length-1,f=0;if(b[0])for(;e>f;f++)d=d[b[f]]=d[b[f]]||(""==b[f+1]?[]:{});"undefined"!=typeof d.length?d.push(a(this).val()):d[b[e]]=a(this).val(),d=c}),c}function s(b){if(0==cur.length)return void alert("Could not find the current position, please try clicking the Split Column link again.");var c=b.attr("href").split("#")[1],d=[];if(isTextOnButton=[],b.length>0){switch(c){case"split-half":d=["split-half","split-half"],isTextOnButton=[!0,!0];break;case"one-third-second":d=["split-two-thirds","split-one-third"],isTextOnButton=[!0,!1];break;case"one-third-first":d=["split-one-third","split-two-thirds"],isTextOnButton=[!1,!0];break;case"one-thirds":d=["split-one-third","split-one-third","split-one-third"],isTextOnButton=[!1,!1,!1];break;case"one-fourth-second":d=["split-three-fourths","split-one-fourth"],isTextOnButton=[!0,!1];break;case"one-fourth-first":d=["split-one-fourth","split-three-fourths"],isTextOnButton=[!1,!0];break;case"one-fourths":d=["split-one-fourth","split-one-fourth","split-one-fourth","split-one-fourth"],isTextOnButton=[!1,!1,!1,!1]}for(var e="",f=0,g=d.length;g>f;f++){btnText=isTextOnButton[f]?"<span>Add Element</span>":"",e+='<div class="'+d[f]+' column cols subcol"><div class="element-container sort-disabled"></div><div class="add-element-container"><a href="#add_element" class="add-new-element"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="Add New Element" />'+btnText+"</a></div></div>"}btnText="<span>Add element</span>",e+='</div></div><div class="clearcol"></div>',e+='<div class="element-container sort-disabled"></div><div class="add-element-container"><a href="#add_element" class="add-new-element"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="Add New Element" />'+btnText+"</a></div>",e=a(e),cur[0][cur[1]](e),cur[0].on("click",".add-element-container > a.add-new-element",function(b){b.preventDefault(),E=!1,cur=[a(this).parent().prev(),"before"],F=null,OP_AB.open_dialog()});var h=cur[0].closest(".editable-area");u(h),m(h),a.fancybox.close()}else alert("Please select split column type")}function t(b){if(0==cur.length)return void alert("Could not find the current position, please try clicking the Add new row link again.");var c=b.attr("href").split("#")[1],d="",e=[];if(isTextOnButton=[],b.length>0){switch(c){case"one-col":d="one-column",e=["one-column"],isTextOnButton=[!0];break;case"two-col":d="two-columns",e=["one-half","one-half"],isTextOnButton=[!0,!0];break;case"three-col":d="three-columns",e=["one-third","one-third","one-third"],isTextOnButton=[!0,!0,!0];
break;case"four-col":d="four-columns",e=["one-fourth","one-fourth","one-fourth","one-fourth"],isTextOnButton=[!1,!1,!1,!1];break;case"five-col":d="five-columns",e=["one-fifth","one-fifth","one-fifth","one-fifth","one-fifth"],isTextOnButton=[!1,!1,!1,!1,!1];break;default:switch(c){case"1":d="three-columns",e=["two-thirds","one-third"],isTextOnButton=[!0,!0];break;case"2":d="three-columns",e=["one-third","two-thirds"],isTextOnButton=[!0,!0];break;case"3":d="four-columns",e=["two-fourths","one-fourth","one-fourth"],isTextOnButton=[!0,!1,!1];break;case"4":d="four-columns",e=["one-fourth","one-fourth","two-fourths"],isTextOnButton=[!1,!1,!0];break;case"5":d="four-columns",e=["three-fourths","one-fourth"],isTextOnButton=[!0,!1];break;case"6":d="four-columns",e=["one-fourth","three-fourths"],isTextOnButton=[!1,!0];break;case"7":d="five-columns",e=["two-fifths","one-fifth","one-fifth","one-fifth"],isTextOnButton=[!0,!1,!1,!1];break;case"8":d="five-columns",e=["one-fifth","one-fifth","one-fifth","two-fifths"],isTextOnButton=[!1,!1,!1,!0];break;case"9":d="five-columns",e=["three-fifths","one-fifth","one-fifth"],isTextOnButton=[!0,!1,!1];break;case"10":d="five-columns",e=["one-fifth","one-fifth","three-fifths"],isTextOnButton=[!1,!1,!0];break;case"11":d="five-columns",e=["four-fifths","one-fifth"],isTextOnButton=[!0,!1];break;case"12":d="five-columns",e=["one-fifth","four-fifths"],isTextOnButton=[!1,!0];break;case"13":d="four-columns",e=["one-fourth","two-fourths","one-fourth"],isTextOnButton=[!1,!0,!1];break;case"14":d="five-columns",e=["two-fifths","three-fifths"],isTextOnButton=[!0,!0];break;case"15":d="five-columns",e=["three-fifths","two-fifths"],isTextOnButton=[!0,!0];break;case"16":d="five-columns",e=["one-fifth","two-fifths","two-fifths"],isTextOnButton=[!1,!0,!0];break;case"17":d="five-columns",e=["two-fifths","two-fifths","one-fifth"],isTextOnButton=[!0,!0,!1];break;case"18":d="five-columns",e=["one-fifth","three-fifths","one-fifth"],isTextOnButton=[!1,!0,!1]}}var f="";if(0===c.indexOf("feature_")){a.fancybox.showLoading();var g={action:OptimizePress.SN+"-live-editor-get-predefined-template",template:c,page_id:a("#page_id").val()};a.ajax({type:"POST",dataType:"json",url:OptimizePress.ajaxurl,data:g}).done(function(b){if("error"!=b.output){f+=b.output,f=a(f),f.find(".cols > .add-element-container > a.add-new-element").click(function(b){b.preventDefault(),E=!1,cur=[a(this).parent().prev(),"before"],F=null,OP_AB.open_dialog()}),cur[0][cur[1]](f);var c=cur[0].closest(".editable-area");u(c),m(c),a.fancybox.hideLoading(),a.fancybox.close()}})}else{f+='<div class="row '+d+' cf"><div class="fixed-width"><div class="op-row-links"><div class="op-row-links-content"><a id="copy_row" href="#copy-row" class="copy-row"></a><a id="row_options" href="#options" class="edit-row"></a><a id="row_options" href="#clone-row" class="clone-row"></a><a href="#add-new-row" class="add-new-row"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="'+w("add_new_row")+'" /><span>'+w("add_new_row")+'</span></a><a href="#move" class="move-row"></a><a href="#paste-row" class="paste-row"></a><a href="#delete-row" class="delete-row"></a></div></div>';for(var h,i=0,j=e.length;j>i;i++){btnText=isTextOnButton[i]?"<span>Add Element</span>":"";var k="";switch(e[i]){case"one-third":case"one-fourth":case"one-fifth":case"two-fifths":k=" narrow";break;default:k=""}switch(e[i]){case"one-half":case"two-thirds":case"two-fourths":case"three-fourths":case"three-fifths":case"four-fifths":h='<a href="#'+e[i]+'" class="split-column"><img src="'+OptimizePress.imgurl+'/live_editor/split_column.png" alt="Split Column" /></a>';break;default:h=""}f+='<div class="'+e[i]+" column cols"+k+'"><div class="element-container sort-disabled"></div><div class="add-element-container">'+h+'<a href="#add_element" class="add-new-element"><img src="'+OptimizePress.imgurl+'/live_editor/add_new.png" alt="Add New Element" />'+btnText+"</a></div></div>"}f+="</div></div>",f=a(f),f.find(".cols > .add-element-container > a.add-new-element").click(function(b){b.preventDefault(),E=!1,cur=[a(this).parent().prev(),"before"],F=null,OP_AB.open_dialog()}),cur[0][cur[1]](f);var l=cur[0].closest(".editable-area");u(l),m(l),localStorage.getItem("op_row")||a(".paste-row").hide(),a.fancybox.close()}}else alert("Please select a column type")}function u(b){b.sortable(a.extend({},G,{handle:".op-row-links .move-row",items:"> div.row",update:function(){m(b)}})).disableSelection(),b.find("div.row:not(.element-container)").sortable(a.extend({},G,{handle:".op-element-links .element-move",items:"div.element-container:not(.row)",connectWith:".row",update:function(){m(b)}}))}function w(a){return OP_AB.translate(a)}var x,y,z,A,B={},C=a(window),D=window.dialogArguments||opener||parent||top,E=!1,F=null,G={revert:"invalid",scrollSensitivity:"50",tolerance:"pointer"},H=!1,I=[],J=[];OptimizePress.disable_alert=!1,"undefined"!=typeof document.registerElement&&(document.registerElement("op-row-before"),document.registerElement("op-row-after")),a(document).ready(function(){function i(){n=!0,OptimizePress.disable_alert=!0,window.op_dont_show_loading=!0,o()}function j(b,c,d,e){b.empty(),"category"==d?(b.append(a("<option>").text("").val("")),a.each(I,function(d){var e=I[d];e.parent==="parent-"+c&&b.append(""!=e.selected?a("<option>").text(e.text).val(e.value).attr("selected",!0):a("<option>").text(e.text).val(e.value))})):(b.append(a("<option>").text("").val("")),a.each(J,function(d){var e=J[d];e.parent==="parent-"+c&&b.append(""!=e.selected?a("<option>").text(e.text).val(e.value).attr("selected",!0):a("<option>").text(e.text).val(e.value))})),"undefined"==typeof e&&b.val(""),"#op_category_id"==b.selector&&a("#op_category_id").trigger("change"),"#op_category_id1"==b.selector&&a("#op_category_id1").trigger("change",e)}function k(b){var c=a(this).attr("href").split("#")[1],d=a("#"+c);b.preventDefault(),c&&"op-revisions-dialog"===c?OptimizePress._initPageRevisions(B):a.fancybox(a.extend({},B,{minWidth:d.width(),href:"#"+c}))}function l(){window.location.reload()}A=a("body"),c(),a("#changeMembershipType").click(function(){a("#pageTypeChange").attr("disabled",!1).attr("name","op[type]").css("border-color","#66AFE9").css("box-shadow","0 1px 1px rgba(0, 0, 0, 0.075) inset, 0 0 8px rgba(102, 175, 233, 0.6)")}),a("#pageTypeChange").change(function(){a("#le-membership-dialog .editor-button").trigger("click")}),a("#op_header_disable_link").change(function(){a(this).is(":checked")?a("#op_header_link").hide():a("#op_header_link").show()}).trigger("change"),a("#op_category_id").find("option").each(function(){var b;b=a(this).attr("selected")?a(this).val():"",I.push({value:a(this).val(),text:a(this).text(),parent:a(this).attr("class"),selected:b})}),a("#op_subcategory_id").find("option").each(function(){var b;b=a(this).attr("selected")?a(this).val():"",J.push({value:a(this).val(),text:a(this).text(),parent:a(this).attr("class"),selected:b})}),"undefined"!=typeof switchEditors&&(H=!0);var n=!1;n||"Y"!==OptimizePress.op_autosave_enabled||setInterval(i,1e3*OptimizePress.op_autosave_interval),a("#op_product_id").change(function(b,c){j(a("#op_category_id"),a(this).val(),"category",c)}).trigger("change",["first"]),a("#op_category_id").change(function(b,c){j(a("#op_subcategory_id"),a(this).val(),"subcategory",c)}).trigger("change",["second"]);var q=a("#preset-option-preset,#preset-option-content_layout");a("#preset-option :radio").change(function(){q.hide(),a(this).is(":checked")&&(v=a(this).val())&&"blank"!=v&&a("#preset-option-"+v).show()}).filter(":checked").trigger("change"),y=[a("#epicbox-overlay"),a("#epicbox")],y.push(a(".epicbox-content",y[1])),y.push(a(".epicbox-scroll",y[2])),y[0].css({opacity:.8}),C.bind("beforeunload",function(a){if(OptimizePress.disable_alert===!1){var b="If you leave page, all unsaved changes will be lost.";return"undefined"==typeof a&&(a=window.event),a&&(a.returnValue=b),b}}).resize(function(){x=a(".fancybox-inner").scrollTop(),f()}),B={padding:0,autoSize:!0,wrapCSS:"fancybox-no-scroll",helpers:{overlay:{closeClick:!1}},keys:!1,beforeClose:h,afterClose:function(){x=null,F=null,OptimizePress._pageRevisionsActive&&(OptimizePress._pageRevisionsActive=!1,a("#op-current-iframe").attr("src",""),a("#op-revisions-iframe").attr("src",""),a(document).off("pageRevisionsFancyboxOpen"),a(window).off("resize",OptimizePress._repositionRevisionsPopup)),a("html").css({overflow:"auto",height:"auto"}),a(window.parent.document).find(".fancybox-close").css({display:"block"})},beforeShow:function(){a("html").css({overflow:"hidden",height:"100%"}),a(window.parent.document).find(".fancybox-close").css({display:"none"})},afterShow:function(){var b,c;H&&"string"!=typeof this.content&&this.content.find(".wp-editor-area").each(function(){var b=a(this).attr("id");tinyMCE.majorVersion>3?(tinyMCE.execCommand("mceAddEditor",!0,b),a(this).val(OP_AB.autop(a(this).val()))):(a(this).val(OP_AB.autop(a(this).val())),tinyMCE.execCommand("mceAddControl",!0,b))}),a("select.op-type-switcher").trigger("change"),b=a(".fancybox-opened").eq(-1),c=b.find("iframe"),c.length>0?c.focus():b.find(".fancybox-inner").addClass("op_no_outline").attr("tabindex",0).focus(),OptimizePress._pageRevisionsActive&&a(document).trigger("pageRevisionsFancyboxOpen"),window.op_dont_show_loading=!1},onCancel:function(){cur=[]},onUpdate:function(){null!=x&&a(".fancybox-inner").scrollTop(x)}},A.on("click","#op-le-row-options-update",function(b){function c(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}b.preventDefault();var d={};if(a('input[name="op_full_width_row"]:checked').length>0?cur[0].addClass("section"):cur[0].removeClass("section"),cur[0].attr("data-style")&&""!==cur[0].attr("data-style")){var e=JSON.parse(atob(cur[0].attr("data-style")));"undefined"!=typeof e.cssClass&&cur[0].removeClass(e.cssClass)}if(""!==a("#op_row_css_class").val()&&(cur[0].addClass(a("#op_row_css_class").val()),d.cssClass=a("#op_row_css_class").val()),a("#op_row_bg_options").val()&&a("#op_row_background").val()){var f=a("#op_row_bg_options").val(),g="url("+a("#op_row_background").val()+")";switch(d.backgroundImage=g,d.backgroundPosition=f,f){case"center":cur[0].css({"background-image":g,"background-repeat":"no-repeat","background-position":"center"});break;case"cover":cur[0].css({"background-image":g,"background-size":"cover","background-repeat":"no-repeat"});break;case"tile_horizontal":cur[0].css({"background-image":g,"background-repeat":"repeat-x"});break;case"tile":cur[0].css({"background-repeat":"repeat","background-image":g})}}else cur[0].css({"background-image":"none","background-repeat":"no-repeat"});var h="",i="",j="",k="",l="";if(a("#op_row_before").val()&&(j=a("#op_row_before").val()),a("#op_row_after").val()&&(k=a("#op_row_after").val()),""!==j&&""!==k?(l=j+"---OP-BEFORE-AFTER---"+k,l=HTMLtoXML(l),l=l.split(/---OP-BEFORE-AFTER---/),j=l[0],k=l[1]):(j=j?HTMLtoXML(j):j,k=k?HTMLtoXML(k):k),h='<op-row-before class="op-row-code-before">'+c(j)+"</op-row-before>",i='<op-row-after class="op-row-code-after">'+c(k)+"</op-row-after>",cur[0].prev(".op-row-code-before").remove(),cur[0].next(".op-row-code-after").remove(),cur[0].before(h),cur[0].after(i),j&&(d.codeBefore=j),k&&(d.codeAfter=k),a("#op_section_row_options_bgcolor_start").val())if(d.backgroundColorStart=a("#op_section_row_options_bgcolor_start").val(),a("#op_section_row_options_bgcolor_end").val()){var m=a("#op_section_row_options_bgcolor_start").val(),n=a("#op_section_row_options_bgcolor_end").val();d.backgroundColorEnd=a("#op_section_row_options_bgcolor_end").val(),cur[0].css("background",m).css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%, "+m+"), color-stop(100%, "+n+"))").css("background","-webkit-linear-gradient(top, "+m+" 0%, "+n+" 100%)").css("background","-moz-linear-gradient(top, "+m+" 0%, "+n+" 100%)").css("background","-ms-linear-gradient(top, "+m+" 0%, "+n+" 100%)").css("background","-o-linear-gradient(top, "+m+" 0%, "+n+" 100%)").css("background","linear-gradient(to bottom, "+m+" 0%, "+n+" 100%)").css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr="+m+", endColorstr="+n+", GradientType=0 )")}else cur[0].css("background-color",a("#op_section_row_options_bgcolor_start").val());else cur[0].css("background-color","");a("#op_row_top_padding").val()?(cur[0].css("padding-top",a("#op_row_top_padding").val()+"px"),d.paddingTop=a("#op_row_top_padding").val()):cur[0].css("padding-top",""),a("#op_row_bottom_padding").val()?(cur[0].css("padding-bottom",a("#op_row_bottom_padding").val()+"px"),d.paddingBottom=a("#op_row_bottom_padding").val()):cur[0].css("padding-bottom",""),a("#op_row_border_top_width").val()?(cur[0].css("border-top-width",a("#op_row_border_top_width").val()+"px"),d.borderTopWidth=a("#op_row_border_top_width").val()):(cur[0].css("border-top-width","0px"),d.borderTopWidth=""),a("#op_section_row_options_borderTopColor").val()?(cur[0].css("border-top-color",a("#op_section_row_options_borderTopColor").val()),cur[0].css("border-top-style","solid"),d.borderTopColor=a("#op_section_row_options_borderTopColor").val()):(cur[0].css("border-top-color",""),d.borderTopColor=""),a("#op_row_border_bottom_width").val()?(cur[0].css("border-bottom-width",a("#op_row_border_bottom_width").val()+"px"),d.borderBottomWidth=a("#op_row_border_bottom_width").val()):(cur[0].css("border-bottom-width","0px"),d.borderBottomWidth=""),a("#op_section_row_options_borderBottomColor").val()?(cur[0].css("border-bottom-color",a("#op_section_row_options_borderBottomColor").val()),cur[0].css("border-bottom-style","solid"),d.borderBottomColor=a("#op_section_row_options_borderBottomColor").val()):(cur[0].css("border-bottom-color",""),d.borderBottomColor=""),d.addon={},a.each(a('[id^="op_row_addon_"]'),function(b,c){var e=a(c),f=e.attr("id").replace("op_row_addon_","");e.is(":checkbox")?e.prop("checked")&&(d.addon[f]=!0):d.addon[f]=e.hasClass("slider-item")?e.find("input").val():e.val()});var o=btoa(JSON.stringify(d));cur[0].attr("data-style",o),a(window).trigger("op_row_addon_update",cur[0]),a.fancybox.close()}),a(".editable-area").each(function(){var b=a(this),c=b.attr("id");p(b,c.substr(0,c.length-5)),m(b)}),g(),A.on("click","#op-le-row-select li a",function(b){a("#op-le-row-select li.selected").removeClass("selected"),a(this).parent().addClass("selected"),b.preventDefault()}),A.on("click","#op-le-row-select-insert",function(b){b.preventDefault(),t(a("#op-le-row-select li.selected").find("a:first"))}),A.on("dblclick","#op-le-row-select li a",function(b){b.preventDefault(),t(a(this))}),A.on("click","#op-le-split-column li a",function(b){a("#op-le-split-column li.selected").removeClass("selected"),a(this).parent().addClass("selected"),b.preventDefault()}),A.on("click","#op-le-split-column-insert",function(b){b.preventDefault(),s(a("#op-le-split-column li.selected").find("a:first"))}),a("a.add-new-element").each(function(){a(this).width()<120&&a(this).find("span").hide()}),A.on("dblclick","#op-le-split-column li a",function(b){b.preventDefault(),s(a(this))}),A.on("click","a.feature-settings",function(b){b.preventDefault(),b.stopPropagation();var c=a(this);cur=[c.closest(".op-feature-area"),"replaceWith"],a.fancybox.open(a.extend({},B,{type:"inline",href:c.attr("href")}))}),A.on("click","#op-le-settings-toolbar div.links a",k),a("form.op-feature-area").submit(function(b){var c;b.preventDefault(),a(this).find(".wp-editor-area").each(function(){var b=a(this).attr("id"),c=OP_AB.wysiwyg_content(b);a(this).val(c)}),c=a(this).find("#op_feature_area_settings_optin_formhtml").val(),c=c.replace(/<textarea((.|[\r|\n])*)?<\/\s?textarea>/gi,""),c=c.replace(/<textarea(.*?)>/gi,""),c=c.replace(/<style((.|[\r|\n])*)?<\/\s?style>/gi,""),c=c.replace(/<style(.*?)>/gi,""),a(this).find("#op_feature_area_settings_optin_formhtml").val(c),a.post(OptimizePress.ajaxurl,a(this).serialize(),function(b){"undefined"!=typeof b.error?alert(b.error):(cur[0][cur[1]](b.output),OP_Feature_Area[b.option]=b.js_options,a.fancybox.close())},"json")}),A.on("click","#op-le-close-editor",function(a){a.preventDefault(),OptimizePress.disable_alert=!0,D.OptimizePress.disable_alert=!0,D.opjq.fancybox.close()}),A.on("click","#op-le-save-1",function(a){a.preventDefault(),o()}),A.on("click","#op-le-save-2",function(a){a.preventDefault(),OptimizePress.disable_alert=!0,D.OptimizePress.disable_alert=!0,o(D.opjq.fancybox.close)}),a("#le-settings-dialog").submit(function(b){b.preventDefault(),a.fancybox.close(),o()}),a("#le-typography-dialog").submit(function(b){b.preventDefault(),a.fancybox.close(),OptimizePress.disable_alert=!0,window.op_dont_hide_loading=!0,op_show_loading(),o(l)}),A.on("click",".op-feature-area:not(:has(.editable-area))",function(b){a(this).find("a.feature-settings").trigger("click"),"undefined"!=typeof a(this).attr("data-unload")&&"0"==a(this).attr("data-unload")&&b.preventDefault()}),A.on("click",".fancybox-inner a",function(){x=a(".fancybox-inner").scrollTop(),a.fancybox.update()}),d(),e(),op_launch_funnel_enabled===!0&&"function"==typeof D.op_launch_suite_update_selects&&D.op_launch_suite_update_selects(a("#page_id").val()),a("[data-fade]").each(function(){var b=a(this).attr("style");b=b||"",b=b.replace(/display:\s?none;?/gi,""),a(this).attr("style",b)}),b()}),window.op_live_editor=!0,window.op_le_column_width=function(){return a(cur[0]).closest(".cols").width()},window.op_refresh_content_layouts=function(){a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-load-layouts",_wpnonce:a("#op_le_wpnonce").val()},function(b){"undefined"!=typeof b.error?alert(b.error):"undefined"!=typeof b.content_layout&&(a("#le-layouts-dialog div.tab-predefined").html(b.content_layout),a('#le-layouts-dialog ul.op-bsw-grey-panel-tabs a[href$="#predefined"]').trigger("click"))},"json")},window.op_le_insert_content=function(b){if(element=b.substr(1,b.indexOf(" ")-1),0==cur.length)return void alert("Could not find the current position, please try clicking the Add new row link again.");var c=b;if(null!==F&&E===!1){if(F.val(c),l(F),"content_toggle"===element||"order_box"===element||"delayed_content"===element||"feature_box"===element||"feature_box_creator"===element||"terms_conditions"===element||"op_popup"===element){var d=F.val();d=d.replace(/\[op_liveeditor_elements\][\s\S]*\[\/op_liveeditor_elements\]/gi,"#OP_CHILD_ELEMENTS#"),F.val(d)}return a.fancybox.close()}var e="",g="",h="";E?(h=cur[0].hasClass("hide-tablet")?" hide-tablet":"",h+=cur[0].hasClass("hide-mobile")?" hide-mobile":"",e=a('<div class="row element-container cf '+h+'" data-style="'+(cur[0].attr("data-style")||"")+'" />'),g="op-le-child-shortcode"):(e=a('<div class="element-container cf" />'),g="op-le-shortcode");var j=cur[0].closest(".editable-area");cur[0][cur[1]](e),e.append("content_toggle"===element||"order_box"===element||"delayed_content"===element||"feature_box"===element||"feature_box_creator"===element||"terms_conditions"===element||"op_popup"===element?'<div class="op-element-links"><a class="element-parent-settings" href="#parent-settings"><img alt="'+w("edit_parent_element")+'" title="'+w("edit_parent_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#settings" class="element-settings"><img alt="'+w("edit_element")+'" title="'+w("edit_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a class="element-clone" href="#clone-element"><img alt="'+w("clone_element")+'" title="'+w("clone_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#op-le-advanced" class="element-advanced"><img alt="'+w("edit_element")+'" title="'+w("advanced_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#move" class="element-move"><img src="'+OptimizePress.imgurl+'move-icon.png" alt="'+w("move")+'" /></a><a href="#delete" class="element-delete"><img src="'+OptimizePress.imgurl+'remove-row.png" alt="'+w("delete")+'" /></a></div><div class="op-waiting"><img src="images/wpspin_light.gif" alt="" class="op-bsw-waiting op-show-waiting" /></div><div class="element cf"></div><div class="op-hidden"><textarea name="shortcode[]" class="'+g+'"></textarea></div>':'<div class="op-element-links"><a href="#settings" class="element-settings"><img alt="'+w("edit_element")+'" title="'+w("edit_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a class="element-clone" href="#clone-element"><img alt="'+w("clone_element")+'" title="'+w("clone_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#op-le-advanced" class="element-advanced"><img alt="'+w("edit_element")+'" title="'+w("advanced_element")+'" src="'+OptimizePress.imgurl+'pencil.png" /></a><a href="#move" class="element-move"><img src="'+OptimizePress.imgurl+'move-icon.png" alt="'+w("move")+'" /></a><a href="#delete" class="element-delete"><img src="'+OptimizePress.imgurl+'remove-row.png" alt="'+w("delete")+'" /></a></div><div class="op-waiting"><img src="images/wpspin_light.gif" alt="" class="op-bsw-waiting op-show-waiting" /></div><div class="element cf"></div><div class="op-hidden"><textarea name="shortcode[]" class="'+g+'"></textarea></div>');var k=e.find("textarea").val(c);a.fancybox.close(),op_cur_html=e,e.find(".op-waiting").fadeIn("fast").end().find(".op-waiting .op-show-waiting").fadeIn("fast"),a.post(OptimizePress.ajaxurl,{action:OptimizePress.SN+"-live-editor-parse",_wpnonce:a("#op_le_wpnonce").val(),shortcode:c,depth:E?1:0,page_id:a("#page_id").val()},function(b){if(null!==b.check){var c=!0;for(var d in b.check)if(a(d).length>0&&""!=b.check[d])return e.fadeOut("fast",function(){a(this).remove()}),void alert(b.check[d]);if(c===!0){"undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),elDataStyle=e.attr("data-style")&&"undefined"!==e.attr("data-style")?JSON.parse(atob(e.attr("data-style"))):{},elDataStyle.codeBefore=elDataStyle.codeBefore||"",elDataStyle.codeAfter=elDataStyle.codeAfter||"",elDataStyle.advancedClass=elDataStyle.advancedClass||"";var g=e.addClass(elDataStyle.advancedClass).find(".element").html(elDataStyle.codeBefore+b.output+b.js+elDataStyle.codeAfter);E?i(!0):u(j)}}else{"undefined"!=typeof b.font&&""!==b.font&&"google"===b.font[0]&&WebFont.load({google:{families:[b.font[1]+b.font[2].properties]}}),elDataStyle=e.attr("data-style")&&"undefined"!==e.attr("data-style")?JSON.parse(atob(e.attr("data-style"))):{},elDataStyle.codeBefore=elDataStyle.codeBefore||"",elDataStyle.codeAfter=elDataStyle.codeAfter||"",elDataStyle.advancedClass=elDataStyle.advancedClass||"";var g=e.addClass(elDataStyle.advancedClass).find(".element").html(elDataStyle.codeBefore+b.output+b.js+elDataStyle.codeAfter);E?i(!0):u(j)}"undefined"!=typeof g&&("undefined"!=typeof b.shortcode&&k.val(b.shortcode),e.find(".op-waiting").fadeOut("fast",function(){g.fadeIn("fast",function(){f()})}),m(cur[0].closest(".editable-area"))),a(document).trigger("op.afterLiveEditorParse")},"json")},window.op_dont_show_loading?window.op_hide_loading():window.op_dont_show_loading=!1,a(document).ready(function(){var a=opjq,b=(a("#op-le-settings-toolbar"),a("#op-le-toggle-sidebar-btn"));a("html").addClass("op-le-settings-toolbar--shown");var c=function(){return a("html").toggleClass("op-le-settings-toolbar--hidden op-le-settings-toolbar--shown"),!1};b.parent().on("click",c),a(".op_child_shortcode_form").each(function(){this.reset()}),window.top.location.href!==window.location.href&&a("#op-liveeditor-logo").on("click",function(a){a.shiftKey&&(OptimizePress.disable_alert=!0,window.top.location.href=window.location),a.preventDefault()})}),a(window).load(function(){op_hide_loading()})}(opjq);