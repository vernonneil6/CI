if(jQuery.fn.extend({selectbox:function(e){return this.each(function(){new jQuery.SelectBox(this,e)})}}),!window.console)var console={log:function(){}};jQuery.SelectBox=function(e,a){function i(){u=0,h.hide()}function t(){h.append(s(g.attr("id"))).hide();var e=g.css("width");h.width(e)}function d(e){var a=document.createElement("div");return h=$(a),h.attr("id",c+"_container"),h.addClass(e.containerClass),h}function r(e){var a=document.createElement("input"),i=$(a);return i.attr("id",c+"_input"),i.attr("type","text"),i.addClass(e.inputClass),i.attr("autocomplete","off"),i.attr("readonly","readonly"),i.attr("tabIndex",f.attr("tabindex")),i}function n(e){var a=$("li",h);a&&(p+=e,0>p?p=0:p>=a.size()&&(p=a.size()-1),a.removeClass(o.hoverClass),$(a[p]).addClass(o.hoverClass))}function l(){var e=$("li."+o.currentClass,h).get(0),a=(""+e.id).split("_"),i=a[a.length-1];return f.val(i),g.val($(e).html()),!0}function s(e){new Array;var a=document.createElement("ul");return f.children("option").each(function(){var t=document.createElement("li");t.setAttribute("id",e+"_"+$(this).val()),t.innerHTML=$(this).html(),$(this).is(":selected")&&(g.val($(this).html()),$(t).addClass(o.currentClass)),a.appendChild(t),$(t).mouseover(function(e){u=1,o.debug&&console.log("over on : "+this.id),jQuery(e.target,h).addClass(o.hoverClass)}).mouseout(function(e){u=-1,o.debug&&console.log("out on : "+this.id),jQuery(e.target,h).removeClass(o.hoverClass)}).click(function(){$("li."+o.hoverClass,h).get(0),o.debug&&console.log("click on :"+this.id),$("li."+o.currentClass).removeClass(o.currentClass),$(this).addClass(o.currentClass),l(),i(),f.change()})}),a}var o=a||{};o.inputClass=o.inputClass||"styledselectbox",o.containerClass=o.containerClass||"selectbox-wrapper",o.hoverClass=o.hoverClass||"current",o.currentClass=o.selectedClass||"selected",o.debug=o.debug||!1;var c=e.id,p=-1,C=!1,u=0,f=$(e),h=d(o),g=r(o);f.hide().before(g).before(h),t(),g.click(function(){C||h.toggle()}).focus(function(){h.not(":visible")&&(C=!0,h.show())}).keydown(function(e){switch(e.keyCode){case 38:e.preventDefault(),n(-1);break;case 40:e.preventDefault(),n(1);break;case 13:e.preventDefault(),$("li."+o.hoverClass).trigger("click");break;case 27:i()}}).blur(function(){h.is(":visible")&&u>0?o.debug&&console.log("container visible and has focus"):i()})};